package com.mavin;


import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

import java.util.ArrayList;
import java.util.List;

public class Crawler {

    private String[] tickerSymbol;

    public Crawler(String[] tickerSymbol){
        this.tickerSymbol = tickerSymbol;

    }

    public String[] generateURL(String[] ticker){

        String[] tickerURL = new String[ticker.length];
        String url = "https://www.google.com/search?q=";
        for(int i = 0; i < ticker.length; i++){
            String tempURL = url + ticker[i] + " stock";
            tickerURL[i] = tempURL;
        }
        return tickerURL;

    }

    public List<List<String>> stockInformation (String [] stockURL) { // Full Name, Price, Data, Type

        Document document;
        List<List<String>> finalReturn = new ArrayList<>();
        List<String> fullName = new ArrayList<>();
        List<String> price = new ArrayList<>();

        String query = "div.PZPZlf.ssJ7i.B5dxMb";
        String query1 = "span.IsqQVc.NprOob.wT3VGc";
        for (int i = 0; i < stockURL.length; i++) {
            try{
                document = Jsoup.connect(stockURL[i]).get();
                String name = document.select(query).text();
                document = Jsoup.connect(stockURL[i]).get();
                String priceTemp = document.select(query1).text();

                fullName.add(name);
                price.add(priceTemp);

            }catch (Exception e){
                e.printStackTrace();
            }



    }
    finalReturn.add(fullName);
    finalReturn.add(price);
    return finalReturn;
    }


    public void both(){
        String[] stockurl = generateURL(tickerSymbol);
        List<List<String>> temp =  stockInformation(stockurl);

        for(List<String> t: temp){
            System.out.println(t);
        }



    }




}
